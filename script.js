const faqData = {
    "Admission": [
        { question: "How do I apply for admission to the college?", answer: "To apply for admission, please visit our website and fill out the application form. Make sure to submit all required documents before the deadline." },
        { question: "What are the eligibility criteria for different programs?", answer: "Eligibility criteria vary by program. Please check the specific program's requirements on our website or contact the admissions office for detailed information." },
        { question: "Is there an entrance exam for admission?", answer: "Yes, some programs require an entrance exam. Please refer to the admission guidelines for the specific program you're interested in." },
        { question: "What documents are required for the admission process?", answer: "Required documents typically include a completed application form, proof of previous education, ID proof, and photographs. Check the admission guidelines for a complete list." },
        { question: "What is the application deadline for the current academic year?", answer: "The application deadline is usually in June. Please check the admissions page on our website for the exact date and any extensions." },
        { question: "Can I update my application after submission?", answer: "Yes, you can update your application by logging into your account on our admissions portal before the deadline." },
        { question: "What are the guidelines for international students applying?", answer: "International students need to meet specific visa and documentation requirements. Please visit the international students section on our website for detailed guidelines." },
        { question: "Are there any seat reservations for specific categories?", answer: "Yes, there are seat reservations for certain categories as per government regulations. Refer to our admissions policy for detailed information." },
        { question: "What should I do if I face issues during the application process?", answer: "If you face any issues, please contact the admissions office immediately for assistance." },
        { question: "How do I cancel or withdraw my application?", answer: "To cancel or withdraw your application, please submit a written request to the admissions office before the application deadline." }
    ],
    "Transport": [
        { question: "What transportation options are available for students?", answer: "We offer bus services, shuttle services, and parking facilities for students. Details are available on the campus transport page." },
        { question: "How do I apply for a college bus pass?", answer: "Bus pass applications can be made online through the student portal or at the transport office on campus." },
        { question: "What are the timings and routes of the college buses?", answer: "Bus timings and routes are published on the transport section of our website and at the bus stop locations on campus." },
        { question: "Is there a shuttle service between hostels and the campus?", answer: "Yes, we have a shuttle service that operates between the hostels and the campus at regular intervals." },
        { question: "Can I use my own vehicle on campus?", answer: "Yes, students can use their own vehicles on campus, but they must register their vehicle with the campus security office." },
        { question: "Where can I park my vehicle on campus?", answer: "Parking is available in designated areas around the campus. Refer to the campus map for parking locations." },
        { question: "Are there special transport arrangements during exams?", answer: "Yes, we provide extra transport services during exam periods. Check the transport notice board or website for schedules." },
        { question: "How do I report a transport-related issue or complaint?", answer: "Transport issues or complaints can be reported to the transport office via email or in person at their office." },
        { question: "What safety measures are in place for college transportation?", answer: "Safety measures include regular vehicle maintenance, security checks, and driver training programs." }
    ],
    "Placement": [
        { question: "When does the placement season start?", answer: "The placement season typically starts in August and continues until December. Specific dates will be announced on the placement cell's page." },
        { question: "How are campus recruitment rounds typically structured?", answer: "Recruitment rounds usually include a pre-placement talk, aptitude tests, technical interviews, and HR interviews." },
        { question: "Are there opportunities for international placements?", answer: "Yes, we have collaborations with several international companies for placement opportunities. Details are available from the placement cell." },
        { question: "How many companies can I apply to during placements?", answer: "There is no limit on the number of companies you can apply to, but each company may have its own application process." },
        { question: "Are there placement opportunities for startups?", answer: "Yes, we have partnerships with various startups and provide placement opportunities for interested students." },
        { question: "What is the placement percentage for the previous batch?", answer: "The placement percentage for the previous batch was 85%. For detailed statistics, please contact the placement cell." },
        { question: "Are there placement opportunities for students with backlogs?", answer: "Students with backlogs may still have placement opportunities, but they should address their academic performance to improve their chances." },
        { question: "What is the highest package offered in placements?", answer: "The highest package offered last year was INR 20 lakhs per annum. For the latest figures, refer to the placement cell’s report." },
        { question: "How are students notified about placement drives?", answer: "Students are notified via email, SMS, and through announcements on the placement cell’s notice board and website." },
        { question: "How do I register for campus placements?", answer: "Registration for campus placements can be done through the student portal or by contacting the placement cell directly." },
        { question: "How does the college assist with resume building?", answer: "The college offers resume building workshops, one-on-one mentoring, and review sessions through the placement cell." },
        { question: "Are there any pre-placement training sessions?", answer: "Yes, pre-placement training sessions are conducted to help students prepare for interviews, group discussions, and aptitude tests." }
    ],
    "Hostel": [
        { question: "How do I apply for hostel accommodation?", answer: "Hostel accommodation applications can be submitted online through the student portal or by visiting the hostel office." },
        { question: "Is Wi-Fi available in the hostel?", answer: "Yes, Wi-Fi is available in all hostel rooms and common areas." },
        { question: "What are the food timings in the hostel?", answer: "Food is served three times a day: breakfast from 7-9 AM, lunch from 12-2 PM, and dinner from 7-9 PM." },
        { question: "Is there a shuttle service between hostels and the campus?", answer: "Yes, we provide a shuttle service between hostels and the campus at regular intervals." },
        { question: "What is the procedure for hostel leave or night-outs?", answer: "Students need to fill out a leave application form and get it approved by the hostel warden." },
        { question: "What is the safety protocol in the hostel?", answer: "Safety protocols include 24/7 security, surveillance cameras, and regular safety drills." },
        { question: "Is there a gym available in the hostel?", answer: "Yes, a gym is available for hostel residents and can be accessed with the hostel ID card." },
        { question: "Is the hostel accommodation separate for boys and girls?", answer: "Yes, hostel accommodation is segregated for boys and girls." },
        { question: "How many students share a room in the hostel?", answer: "Typically, two to three students share a room in the hostel." },
        { question: "Can I bring a pet to the hostel?", answer: "No, pets are not allowed in the hostel for safety and hygiene reasons." }
    ],
    "Activities": [
        { question: "Are there cultural clubs I can join?", answer: "Yes, there are several cultural clubs that you can join. Check the student activities page for more information." },
        { question: "What volunteering opportunities are available on campus?", answer: "Volunteering opportunities include working with local NGOs, participating in campus events, and helping with student council activities." },
        { question: "Are workshops and seminars conducted regularly?", answer: "Yes, workshops and seminars are conducted regularly on various topics. Check the events calendar for upcoming sessions." },
        { question: "Are there any social media or content creation clubs?", answer: "Yes, we have clubs focused on social media management and content creation. Join these clubs to enhance your skills and participate in projects." },
        { question: "Are there any fashion or modeling clubs?", answer: "Yes, we have fashion and modeling clubs that organize events and workshops related to the fashion industry." },
        { question: "Is there a college magazine or newspaper that I can contribute to?", answer: "Yes, the college publishes a magazine and newspaper. Students can contribute articles, stories, and artwork." },
        { question: "How can I become a part of the college’s student council?", answer: "To join the student council, participate in the elections held at the beginning of the academic year or volunteer for various student activities." },
        { question: "Are there any coding or tech clubs in the college?", answer: "Yes, there are several coding and tech clubs that organize hackathons, coding competitions, and tech talks." },
        { question: "What adventure activities or trips are organized by the college?", answer: "The college organizes adventure trips, trekking expeditions, and outdoor activities through various student clubs." },
        { question: "What are the club membership fees, if any?", answer: "Club membership fees vary depending on the club and the activities organized. Refer to the specific club’s details for fee information." }
    ],
    "Festivals/Events": [
        { question: "What are the main festivals celebrated at the college?", answer: "The college celebrates various festivals including Diwali, Holi, Christmas, and college annual fest." },
        { question: "How can I participate in college festivals?", answer: "Participation details are usually announced through the student notice board and email. Sign up to participate in various events and competitions." },
        { question: "How do I register for competitions during the fest?", answer: "Registration for competitions can be done through the fest’s website or at the registration desk during the event." },
        { question: "How do I stay updated on upcoming events and festivals?", answer: "Stay updated through the college website, student portal, and social media channels for announcements and event schedules." },
        { question: "What are some of the most popular events in college?", answer: "Popular events include the annual cultural fest, sports day, and inter-college competitions." },
        { question: "Are there night events like DJ musical nights?", answer: "Yes, the college organizes DJ musical nights and other evening events during festivals and special occasions." },
        { question: "How can I participate in inter-college festivals?", answer: "Participate in inter-college festivals by registering through your department or student clubs, and follow the guidelines provided by the event organizers." },
        { question: "Are there religious or regional festivals celebrated in college?", answer: "Yes, the college celebrates various religious and regional festivals as part of its cultural diversity." },
        { question: "What adventure activities or trips are organized by the college?", answer: "Adventure activities include trekking, camping, and outdoor sports. Details are provided by the adventure club or student council." },
        { question: "Are there any fees for the festivals that are being conducted?", answer: "Fees may apply for certain events and activities. Check the event details for information on registration fees or tickets." }
    ],
    "College Details": [
        { question: "Who is the current principal of the college?", answer: "The current principal of the college is Dr. A. Kumar. You can find more details about the administration on our website." },
        { question: "How many students are currently enrolled in the college?", answer: "Currently, the college has approximately 5000 students enrolled across various programs." },
        { question: "How is the college ranked nationally and internationally?", answer: "The college is ranked among the top 50 institutions nationally and has received international recognition for its academic programs." },
        { question: "What is the college’s mission and vision?", answer: "Our mission is to provide quality education and foster holistic development. Our vision is to be a leader in academic and research excellence." },
        { question: "Are there any research programs or projects offered?", answer: "Yes, the college offers various research programs and projects in collaboration with national and international institutions." },
        { question: "Are there any student exchange programs?", answer: "Yes, the college has partnerships with several universities for student exchange programs." },
        { question: "Does the college have Wi-Fi for students?", answer: "Yes, Wi-Fi is available across the campus and hostels for students." },
        { question: "How does the college promote entrepreneurship and innovation?", answer: "The college promotes entrepreneurship through incubators, workshops, and collaboration with startups and industry experts." },
        { question: "Where is the college located?", answer: "The college is located in [City], [State]. Detailed address and directions are available on our website." },
        { question: "What tier does the college belong to?", answer: "The college is classified as a Tier 1 institution based on its academic performance and infrastructure." }
    ],
    "Academic": [
        { question: "What are the passing criteria for exams?", answer: "Students must achieve a minimum score of 40% in each subject to pass. Refer to the academic guidelines for detailed criteria." },
        { question: "What is the minimum attendance required for the semester exam?", answer: "A minimum of 75% attendance is required to be eligible for the semester exams." },
        { question: "How are internal assessments conducted?", answer: "Internal assessments include quizzes, assignments, and project work that contribute to the final grade." },
        { question: "How can students access study materials and resources?", answer: "Study materials and resources are available on the student portal and in the library." },
        { question: "What is the procedure for re-evaluation?", answer: "To request re-evaluation, submit a re-evaluation form along with the required fee to the examination office." },
        { question: "What is the academic calendar for the year?", answer: "The academic calendar outlines important dates such as exam schedules, holidays, and semester start and end dates. It is available on the college website." },
        { question: "What is the minimum GPA required to graduate?", answer: "A minimum GPA of 5.0 is required to graduate. Refer to the academic policies for detailed information." },
        { question: "How are grades calculated?", answer: "Grades are calculated based on internal assessments, semester exams, and practicals. The grading system is detailed in the academic handbook." },
        { question: "How do I check my attendance percentage?", answer: "Attendance percentage can be checked through the student portal or by contacting the academic office." }
    ]
};

document.addEventListener('DOMContentLoaded', function () {
    const searchInput = document.querySelector('.search-box > input');
    const searchButton = document.querySelector('.search-box > button');
    const suggestionsContainer = document.getElementById('suggestions');
    const faqSection = document.getElementById('faq-section');
    const faqTitle = document.getElementById('faq-title');
    const faqContent = document.getElementById('faq-content');
    let selectedIndex = -1;

    function displayFAQ(category) {
        faqContent.innerHTML = '';

        if (faqData[category]) {
            faqTitle.textContent = category;
            faqData[category].forEach((item, index) => {
                const questionElement = document.createElement('h3');
                const answerElement = document.createElement('blockquote');

                questionElement.innerHTML = `<span class="question-number">${index + 1}.</span> ${item.question}`;
                answerElement.textContent = item.answer;

                faqContent.appendChild(questionElement);
                faqContent.appendChild(answerElement);
            });

            faqSection.style.display = 'block';
            document.documentElement.scrollTop = faqSection.offsetTop;
        }
    }

    function showFAQByQuestion(question) {
        faqContent.innerHTML = '';

        let found = false;

        for (const category in faqData) {
            if (faqData.hasOwnProperty(category)) {
                const item = faqData[category].find(item => item.question.toLowerCase() === question.toLowerCase());
                if (item) {
                    faqTitle.textContent = category;
                    const questionElement = document.createElement('h3');
                    const answerElement = document.createElement('blockquote');

                    questionElement.innerHTML = `<span class="question-number">1.</span> ${item.question}`;
                    answerElement.textContent = item.answer;

                    faqContent.appendChild(questionElement);
                    faqContent.appendChild(answerElement);

                    faqSection.style.display = 'block';
                    document.documentElement.scrollTop = faqSection.offsetTop;

                    found = true;
                    break;
                }
            }
        }

        if (!found) {
            faqSection.style.display = 'none';
        }
    }

    function showSuggestions(query) {
        suggestionsContainer.innerHTML = '';

        if (query.length > 0) {
            let matchedQuestions = [];

            for (const category in faqData) {
                if (faqData.hasOwnProperty(category)) {
                    const filteredQuestions = faqData[category].filter(question => question.question.toLowerCase().includes(query.toLowerCase()));
                    matchedQuestions = matchedQuestions.concat(filteredQuestions.map(question => ({ question: question.question, category })));
                }
            }

            matchedQuestions.forEach(item => {
                const suggestionItem = document.createElement('div');
                suggestionItem.className = 'suggestion-item';
                suggestionItem.textContent = item.question;
                suggestionItem.addEventListener('click', () => {
                    searchInput.value = item.question;
                    suggestionsContainer.style.display = 'none';
                });
                suggestionsContainer.appendChild(suggestionItem);
            });

            suggestionsContainer.style.display = matchedQuestions.length > 0 ? 'block' : 'none';
        } else {
            suggestionsContainer.style.display = 'none';
        }
    }

    function handleSearch() {
        const query = searchInput.value.trim();
        if (query) {
            showFAQByQuestion(query);
        }
    }

    document.querySelectorAll('.main-grid > a').forEach((element) => {
        element.addEventListener('click', (event) => {
            event.preventDefault();
            const category = element.getAttribute('data-category');
            displayFAQ(category);
        });
    });

    searchInput.addEventListener('input', (e) => {
        showSuggestions(e.target.value);
        // Reset selectedIndex when the search input changes
        selectedIndex = -1;
    });

    searchButton.addEventListener('click', (e) => {
        e.preventDefault();
        handleSearch();
    });

    searchInput.addEventListener('keydown', (e) => {
        if (e.key === 'Enter') {
            e.preventDefault();
            handleSearch();
        } else if (e.key === 'ArrowDown') {
            const suggestionItems = suggestionsContainer.querySelectorAll('.suggestion-item');
            if (suggestionItems.length > 0) {
                selectedIndex = (selectedIndex + 1) % suggestionItems.length;
                updateSuggestionHighlight();
                scrollSuggestionIntoView();
            }
        } else if (e.key === 'ArrowUp') {
            const suggestionItems = suggestionsContainer.querySelectorAll('.suggestion-item');
            if (suggestionItems.length > 0) {
                selectedIndex = (selectedIndex - 1 + suggestionItems.length) % suggestionItems.length;
                updateSuggestionHighlight();
                scrollSuggestionIntoView();
            }
        }
    });

    document.addEventListener('click', (event) => {
        if (!document.querySelector('.search-box').contains(event.target)) {
            suggestionsContainer.style.display = 'none';
        }
    });

    function updateSuggestionHighlight() {
        const suggestionItems = suggestionsContainer.querySelectorAll('.suggestion-item');
        suggestionItems.forEach((item, index) => {
            item.classList.toggle('highlighted', index === selectedIndex);
        });
    }

    function scrollSuggestionIntoView() {
        const suggestionItems = suggestionsContainer.querySelectorAll('.suggestion-item');
        if (suggestionItems[selectedIndex]) {
            const item = suggestionItems[selectedIndex];
            item.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
        }
    }
});
